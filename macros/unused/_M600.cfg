# # M600: Filament Change. This macro will pause the printer, move the
# # tool to the change position, and retract the filament 50mm. Adjust
# # the retraction settings for your own extruder. After filament has
# # been changed, the print can be resumed from its previous position
# # with the "RESUME" gcode.

# [gcode_macro M600]
# variable_paused: True
# default_parameter_X: 125
# default_parameter_Y: 125
# default_parameter_Z: 10
# gcode:
#   {% if printer['gcode_macro _USER_VARIABLE'].debug == 1 %}
#   {% endif %}
  
#   SAVE_GCODE_STATE NAME=M600_state
#   BASE_PAUSE
#   G91
#   G1 E-.8 F2700
#   G1 Z{Z}
#   SET_GCODE_VARIABLE MACRO=RESUME_M600 VARIABLE=x VALUE={printer.gcode_move.gcode_position.x} 
#   SET_GCODE_VARIABLE MACRO=RESUME_M600 VARIABLE=y VALUE={printer.gcode_move.gcode_position.y} 
#   SET_GCODE_VARIABLE MACRO=RESUME_M600 VARIABLE=z VALUE={printer.gcode_move.gcode_position.z} 
#   G90
#   G1 X{X} Y{Y} F3000
#   G91
#   G1 E-67 F1000
#   SET_GCODE_VARIABLE MACRO=M600 VARIABLE=paused VALUE=True 
#   RESTORE_GCODE_STATE NAME=M600_state  
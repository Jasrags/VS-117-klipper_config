[gcode_macro _CG28]
description: Helper: conditional homing
gcode:
  {% set homed_axes = printer.toolhead.homed_axes %}

  {% if printer['gcode_macro _USER_VARIABLE'].debug == 1 %}
    {action_respond_info('==== _CG28 ====')}
    {action_respond_info("homed_axes: %s" % (homed_axes|join(',')))}
  {% endif %}
  
  {% if printer.toolhead.homed_axes != "xyz" %}
    G90
    G28
  {% endif %}
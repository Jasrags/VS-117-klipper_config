[gcode_macro PURGE_LINE]
description: A purge line on the left of the bed to prime the extruder
gcode:
  {% set y_max = printer.toolhead.axis_maximum.y|float * 0.80 %}

  G92 E0                         ; zero/reset extruder
  G1 X2.2 Y20 Z0.3 F18000        ; move to start position
  G1 E+15 F150              ;    extrude to put the pressure (-20 from purge macro)
  G92 E0

  G1 X2.2 Y{y_max} Z0.25 F1500 E10    ; extrude the first line
  G1 X2.5 Y{y_max} Z0.3 F18000       ; move to side a little
  G1 X2.5 Y20 Z0.25 F1500.0 E20   ; extrude the second line
  G92 E0                         ; zero/reset extruder
  G1 Z2.0 E-0.1 F3000              ; move nozzle up and retract tiny bit
  G92 E0 